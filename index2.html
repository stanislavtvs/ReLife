<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ReLife ‚Äî —É–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è –≤–µ—â–µ–π</title>
<style>
  body {
    font-family: Arial, sans-serif;
    background: #f6f6f6;
    color: #222;
    text-align: center;
    margin: 0;
    padding: 0;
  }
  header {
    background: #4CAF50;
    color: white;
    padding: 20px 0;
  }
  main {
    padding: 20px;
    max-width: 600px;
    margin: auto;
  }
  .upload {
    border: 2px dashed #4CAF50;
    padding: 30px;
    background: white;
    margin: 20px 0;
    cursor: pointer;
  }
  #preview {
    max-width: 100%;
    margin-top: 15px;
  }
  .hidden {
    display: none;
  }
  #loading {
    font-weight: bold;
    color: #4CAF50;
    margin: 20px 0;
  }
  #result {
    margin-top: 20px;
    font-size: 18px;
  }
  #qr {
    margin-top: 20px;
  }
  button {
    background: #4CAF50;
    border: none;
    color: white;
    padding: 10px 20px;
    cursor: pointer;
    border-radius: 6px;
  }
  button:hover {
    background: #43a047;
  }
</style>
</head>
<body>
<header>
  <h1>ReLife</h1>
  <p>–£–º–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ –≤–æ–∑—Ä–æ–∂–¥–µ–Ω–∏—è –≤–µ—â–µ–π</p>
</header>

<main>
  <h2>üì¶ –ó–∞–≥—Ä—É–∑–∏—Ç–µ —Ñ–æ—Ç–æ –Ω–µ–Ω—É–∂–Ω–æ–π –≤–µ—â–∏</h2>
  <input type="file" id="fileInput" accept="image/*" class="hidden">
  <div class="upload" id="uploadBox">–ù–∞–∂–º–∏—Ç–µ, —á—Ç–æ–±—ã –≤—ã–±—Ä–∞—Ç—å —Ñ–æ—Ç–æ</div>
  <img id="preview" class="hidden">

  <div id="loading" class="hidden">–ò–ò –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –≤–µ—â—å...</div>

  <div id="result" class="hidden"></div>
  <div id="qr" class="hidden"></div>

  <button id="resetBtn" class="hidden">–ù–∞—á–∞—Ç—å –∑–∞–Ω–æ–≤–æ</button>
</main>

<!-- QR –≥–µ–Ω–µ—Ä–∞—Ç–æ—Ä -->
<script src="https://cdn.jsdelivr.net/npm/qrcodejs/qrcode.min.js"></script>
<script>
  const fileInput = document.getElementById('fileInput');
  const uploadBox = document.getElementById('uploadBox');
  const preview = document.getElementById('preview');
  const loading = document.getElementById('loading');
  const result = document.getElementById('result');
  const qr = document.getElementById('qr');
  const resetBtn = document.getElementById('resetBtn');

  const options = [
    "üõç –ü—Ä–æ–¥–∞–π—Ç–µ –µ—ë –Ω–∞ –º–∞—Ä–∫–µ—Ç–ø–ª–µ–π—Å–µ —Å–µ–∫–æ–Ω–¥-—Ö–µ–Ω–¥–∞",
    "‚ôªÔ∏è –°–¥–∞–π—Ç–µ –Ω–∞ –ø–µ—Ä–µ—Ä–∞–±–æ—Ç–∫—É",
    "üíö –ü–æ–∂–µ—Ä—Ç–≤—É–π—Ç–µ –≤ –±–ª–∞–≥–æ—Ç–≤–æ—Ä–∏—Ç–µ–ª—å–Ω—ã–π —Ñ–æ–Ω–¥"
  ];

  uploadBox.addEventListener('click', () => fileInput.click());

  fileInput.addEventListener('change', e => {
    const file = e.target.files[0];
    if (!file) return;
    const reader = new FileReader();
    reader.onload = ev => {
      preview.src = ev.target.result;
      preview.classList.remove('hidden');
      analyzeItem();
    };
    reader.readAsDataURL(file);
  });

  function analyzeItem() {
    uploadBox.classList.add('hidden');
    loading.classList.remove('hidden');

    setTimeout(() => {
      loading.classList.add('hidden');

      const choice = options[Math.floor(Math.random() * options.length)];
      result.innerHTML = `<strong>–†–µ–∑—É–ª—å—Ç–∞—Ç –∞–Ω–∞–ª–∏–∑–∞:</strong><br>${choice}`;
      result.classList.remove('hidden');

      const codeText = "ReLife QR: " + choice;
      qr.classList.remove('hidden');
      qr.innerHTML = "";
      new QRCode(qr, { text: codeText, width: 128, height: 128 });

      resetBtn.classList.remove('hidden');
    }, 2000);
  }

  resetBtn.addEventListener('click', () => {
    fileInput.value = "";
    uploadBox.classList.remove('hidden');
    preview.classList.add('hidden');
    result.classList.add('hidden');
    qr.classList.add('hidden');
    resetBtn.classList.add('hidden');
  });
</script>
</body>
</html>
